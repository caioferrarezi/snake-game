(()=>{"use strict";var t={};t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),(()=>{var e;t.g.importScripts&&(e=t.g.location+"");var i=t.g.document;if(!e&&i&&(i.currentScript&&(e=i.currentScript.src),!e)){var n=i.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),t.p=e})();var e={LEFT:[37,65],UP:[38,87],RIGHT:[39,68],DOWN:[40,83],ACTION:[13,32]};function i(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}const n=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._screen,this._context,this._pixelSize}var e,n;return e=t,(n=[{key:"create",value:function(t,e){this._screen=document.createElement("canvas"),this._screen.width=t,this._screen.height=e,this._pixelSize=10*Math.ceil(t/e),this._context=this._screen.getContext("2d"),document.body.insertAdjacentElement("afterbegin",this._screen)}},{key:"getRandomPosition",value:function(){var t=Math.floor(Math.random()*this.width),e=Math.floor(Math.random()*this.height);return{x:t-t%this._pixelSize,y:e-e%this._pixelSize}}},{key:"width",get:function(){return this._screen.width}},{key:"height",get:function(){return this._screen.height}},{key:"pixelSize",get:function(){return this._pixelSize}},{key:"context",get:function(){return this._context}}])&&i(e.prototype,n),t}());function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function t(e,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;s(this,t),this.x=e,this.y=i,this.prev=n,this.next=o};function a(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var h=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pos=n.getRandomPosition(),this._vel={x:0,y:0},this._size=n.pixelSize,this._color="#070600",this._init()}var e,i;return e=t,(i=[{key:"_init",value:function(){var t=this._pos,e=t.x,i=t.y;this._head=null,this._tail=null,this._push(e,i)}},{key:"_push",value:function(t,e){if(!this._head)return this._head=new o(t,e),void(this._tail=this._head);var i=new o(t,e,this._tail,null);this._tail.next=i,this._tail=i}},{key:"_add",value:function(t,e){if(!this._head)return this._head=new o(t,e),void(this._tail=this._head);var i=new o(t,e,null,this._head);this._head.prev=i,this._head=i}},{key:"_pop",value:function(){this._tail=this._tail.prev,this._tail.next=null}},{key:"moveLeft",value:function(){this._vel.x!==this._size&&(this._vel={x:-this._size,y:0})}},{key:"moveUp",value:function(){this._vel.y!==this._size&&(this._vel={x:0,y:-this._size})}},{key:"moveRight",value:function(){this._vel.x!==-this._size&&(this._vel={x:this._size,y:0})}},{key:"moveDown",value:function(){this._vel.y!==-this._size&&(this._vel={x:0,y:this._size})}},{key:"is",value:function(t,e){for(var i=this._head.next;null!==i&&null!==i.next;i=i.next)if(i.x===t&&i.y===e)return!0;return!1}},{key:"bitten",value:function(){var t=this._head,e=t.x,i=t.y;return this.is(e,i)}},{key:"hitWall",value:function(){var t=this._head,e=t.x,i=t.y;return e<0||i<0||e>n.width-n.pixelSize||i>n.height-n.pixelSize}},{key:"eat",value:function(t){var e=this._head,i=e.x,n=e.y;return i===t.x&&n===t.y}},{key:"grow",value:function(){for(var t=this._tail,e=0;e<5;e++)this._push(t.x,t.y)}},{key:"update",value:function(){this._pos.x+=this._vel.x,this._pos.y+=this._vel.y,this._add(this._pos.x,this._pos.y),this._pop()}},{key:"show",value:function(){for(var t=this._head;null!==t;t=t.next)n.context.fillStyle=this._color,n.context.fillRect(t.x,t.y,this._size,this._size)}}])&&a(e.prototype,i),t}();function r(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var l=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._size=n.pixelSize,this._color="#EA526F",this._pos=n.getRandomPosition()}var e,i;return e=t,(i=[{key:"update",value:function(){this._pos=n.getRandomPosition()}},{key:"show",value:function(){n.context.fillStyle=this._color,n.context.fillRect(this._pos.x,this._pos.y,this._size,this._size)}},{key:"x",get:function(){return this._pos.x}},{key:"y",get:function(){return this._pos.y}}])&&r(e.prototype,i),t}();const c=t.p+"4b4fb936bfb505c08b72764a6832684d.wav",u=t.p+"a8de16a43e1a29ae9d0979b66bc7f7c4.wav";function _(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=new(function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),n.create(800,600),this._init()}var i,s;return i=t,(s=[{key:"_init",value:function(){this._state="playing",this._score=0,this._snake=new h,this._fruit=new l,this._collectSound=new Audio(c),this._hitSound=new Audio(u),this._setControls()}},{key:"_clear",value:function(){n.context.fillStyle="#F7F7FF",n.context.fillRect(0,0,n.width,n.height)}},{key:"_showScore",value:function(){n.context.fillStyle="#222222",n.context.textAlign="left",n.context.textBaseline="top",n.context.font="32px VT323, monospace",n.context.fillText("Score: ".concat(this._score),n.pixelSize,n.pixelSize)}},{key:"_showFinishedScreen",value:function(){var t=n.width/2,e=n.height/2;n.context.fillStyle="#222222",n.context.textAlign="center",n.context.textBaseline="middle",n.context.font="normal 48px VT323, monospace",n.context.fillText("You've scored: ".concat(this._score),t,e-30),n.context.font="normal 32px VT323, monospace",n.context.fillText("Press [Enter] or [Space] to restart",t,e+30)}},{key:"_setControls",value:function(){window.onkeydown=this._onKeyDown.bind(this)}},{key:"_onKeyDown",value:function(t){var i=t.keyCode;if(t.preventDefault,e.LEFT.includes(i))return this._snake.moveLeft();if(e.UP.includes(i))return this._snake.moveUp();if(e.RIGHT.includes(i))return this._snake.moveRight();if(e.DOWN.includes(i))return this._snake.moveDown();if(e.ACTION.includes(i))switch(this._state){case"finished":this._init();break;case"playing":this._state="paused";break;case"paused":this._state="playing"}}},{key:"update",value:function(){if("playing"===this._state&&(this._snake.update(),(this._snake.hitWall()||this._snake.bitten())&&(this._state="finished",this._hitSound.play()),this._snake.eat(this._fruit))){for(this._snake.grow(),this._fruit.update();this._snake.is(this._fruit.x,this._fruit.y);)this._fruit.update();this._score++,this._collectSound.play()}}},{key:"show",value:function(){switch(this._clear(),this._state){case"finished":this._showFinishedScreen();break;case"playing":case"paused":this._showScore(),this._snake.show(),this._fruit.show()}}}])&&_(i.prototype,s),t}()),v=Date.now(),p=Date.now();!function t(){(p=Date.now())-v>100&&(v=p,f.update(),f.show()),requestAnimationFrame(t)}()})();
//# sourceMappingURL=main-de45cebbeabfb1eeeb9f.js.map